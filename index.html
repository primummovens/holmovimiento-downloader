<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Saconi Generative">
    <title>Holmovimiento Gif Downloader</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/sign-in/">

    <script>
        // Using fetch
        async function downloadImage(number) {
            document.getElementById("btn-download").innerText = "Downloading..."
            const resp = await (await fetch("https://saconi.mypinata.cloud/ipfs/QmZBcDT4zxDicXDR84LdLFq9AY4q6jbekhXrm7VHfToCzg/" + number)).json();
            const imageSrc = resp.image
            const image = await fetch(imageSrc)
            const imageBlog = await image.blob()
            const imageURL = URL.createObjectURL(imageBlog)

            const link = document.createElement('a')
            link.href = imageURL
            link.download = number
            document.body.appendChild(link)
            link.click()
            document.body.removeChild(link)
            document.getElementById("btn-download").innerText = "Download"
        }

        function downloadHolmovimiento() {
            let tokenID = document.getElementById("form-input").value;
            if (tokenID) {
                // window.open("https://saconi.mypinata.cloud/ipfs/QmduSjSvdm17GoEyepV2RiYnMWYLgwuHjdZK4PKTyYz4w4/" + tokenID + ".gif");
                downloadImage(tokenID);
            }
        }
    </script>


    <style>
        .bd-placeholder-img {
            font-size: 1.125rem;
            text-anchor: middle;
            -webkit-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        @media (min-width: 768px) {
            .bd-placeholder-img-lg {
                font-size: 3.5rem;
            }
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="stylesheet.css" rel="stylesheet">
</head>

<body class="text-center">
    <main class="form-signin">
        <form>
            <img class="mb-4" src="logo.png" alt="" width="256" height="256">
            <h1 class="h3 mb-3 fw-normal">Holmovimiento Downloader</h1>

            <div class="form-floating">
                <label for="floatingInput">No.</label>
                <input id="form-input" type="number" min="0" max="1998" class="form-control" id="floatingInput"
                    placeholder="e.g. 123">

            </div>
            <br>
            <button id="btn-download" class="w-100 btn btn-lg btn-primary" type="button"
                onclick="downloadHolmovimiento()">Download</button>
            <p class="mt-5 mb-3 text-muted">&copy;Saconi Generative</p>
        </form>
    </main>



</body>

</html>